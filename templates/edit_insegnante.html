{% extends "base.html" %}

{% block title %}Modifica Insegnante{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col s12">
            <h3 class="center">Modifica Insegnante</h3>
            <div class="card">
                <div class="card-content">
                    <form method="POST">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <div class="row">
                            <div class="input-field col s6">
                                <input id="nome" name="nome" type="text" class="validate" required value="{{ insegnante.nome }}">
                                <label for="nome">Nome</label>
                            </div>
                            <div class="input-field col s6">
                                <input id="cognome" name="cognome" type="text" class="validate" required value="{{ insegnante.cognome }}">
                                <label for="cognome">Cognome</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s6">
                                <input id="email" name="email" type="email" class="validate" required value="{{ insegnante.email }}">
                                <label for="email">Email</label>
                            </div>
                            <div class="input-field col s6">
                                <input id="telefono" name="telefono" type="tel" class="validate" value="{{ insegnante.telefono }}">
                                <label for="telefono">Telefono</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s6">
                                <select name="dipartimento" required>
                                    <option value="" disabled>Scegli il dipartimento</option>
                                    {% for dipartimento in dipartimenti %}
                                    <option value="{{ dipartimento.id }}" {% if dipartimento.id == insegnante.id_dipartimento %}selected{% endif %}>
                                        {{ dipartimento.nome }}
                                    </option>
                                    {% endfor %}
                                </select>
                                <label>Dipartimento</label>
                            </div>
                            <div class="input-field col s6">
                                <select name="ssd" required>
                                    <option value="" disabled>Scegli il SSD</option>
                                    {% for ssd in ssd_list %}
                                    <option value="{{ ssd.id_ssd }}" {% if ssd.id_ssd == insegnante.id_ssd %}selected{% endif %}>
                                        {{ ssd.nome_ssd }}
                                    </option>
                                    {% endfor %}
                                </select>
                                <label>Settore Scientifico Disciplinare</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s12 center-align">
                                <a href="{{ url_for('insegnanti') }}" class="btn grey">
                                    <i class="material-icons left">arrow_back</i>Indietro
                                </a>
                                <button class="btn blue waves-effect waves-light" type="submit">
                                    <i class="material-icons left">save</i>Salva Modifiche
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var selects = document.querySelectorAll('select');
    M.FormSelect.init(selects);
    
    // Attiva le label dei campi con valori pre-popolati
    M.updateTextFields();
});
</script>
{% endblock %}